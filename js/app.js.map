{"version":3,"file":"app.js","sources":["../../\u0000babelHelpers","controllers/base.js","views/user-login.jsx","controllers/users.js","views/reminders/reminder-item.jsx","views/toaster.jsx","views/reminders.jsx","views/microphone.jsx","controllers/reminders.js","lib/common/event-dispatcher.js","lib/wakeword/recogniser.js","lib/speech/recogniser.js","lib/speech/synthesis.js","lib/intent-parser/confirmation.js","lib/intent-parser/chrono.js","lib/intent-parser.js","lib/speech-controller.js","lib/server/settings.js","lib/common/errors.js","lib/server/network.js","lib/server/webpush.js","lib/server/api.js","lib/server/reminders.js","lib/server/index.js","controllers/main.js","app.js"],"sourcesContent":["var babelHelpers = {};\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj;\n};\n\nexport var jsx = function () {\n  var REACT_ELEMENT_TYPE = typeof Symbol === \"function\" && Symbol.for && Symbol.for(\"react.element\") || 0xeac7;\n  return function createRawReactElement(type, props, key, children) {\n    var defaultProps = type && type.defaultProps;\n    var childrenLength = arguments.length - 3;\n\n    if (!props && childrenLength !== 0) {\n      props = {};\n    }\n\n    if (props && defaultProps) {\n      for (var propName in defaultProps) {\n        if (props[propName] === void 0) {\n          props[propName] = defaultProps[propName];\n        }\n      }\n    } else if (!props) {\n      props = defaultProps || {};\n    }\n\n    if (childrenLength === 1) {\n      props.children = children;\n    } else if (childrenLength > 1) {\n      var childArray = Array(childrenLength);\n\n      for (var i = 0; i < childrenLength; i++) {\n        childArray[i] = arguments[i + 3];\n      }\n\n      props.children = childArray;\n    }\n\n    return {\n      $$typeof: REACT_ELEMENT_TYPE,\n      type: type,\n      key: key === undefined ? null : '' + key,\n      ref: null,\n      props: props,\n      _owner: null\n    };\n  };\n}();\n\nexport var asyncToGenerator = function (fn) {\n  return function () {\n    var gen = fn.apply(this, arguments);\n    return new Promise(function (resolve, reject) {\n      function step(key, arg) {\n        try {\n          var info = gen[key](arg);\n          var value = info.value;\n        } catch (error) {\n          reject(error);\n          return;\n        }\n\n        if (info.done) {\n          resolve(value);\n        } else {\n          return Promise.resolve(value).then(function (value) {\n            return step(\"next\", value);\n          }, function (err) {\n            return step(\"throw\", err);\n          });\n        }\n      }\n\n      return step(\"next\");\n    });\n  };\n};\n\nexport var classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nexport var createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nexport var defineEnumerableProperties = function (obj, descs) {\n  for (var key in descs) {\n    var desc = descs[key];\n    desc.configurable = desc.enumerable = true;\n    if (\"value\" in desc) desc.writable = true;\n    Object.defineProperty(obj, key, desc);\n  }\n\n  return obj;\n};\n\nexport var defaults = function (obj, defaults) {\n  var keys = Object.getOwnPropertyNames(defaults);\n\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    var value = Object.getOwnPropertyDescriptor(defaults, key);\n\n    if (value && value.configurable && obj[key] === undefined) {\n      Object.defineProperty(obj, key, value);\n    }\n  }\n\n  return obj;\n};\n\nexport var defineProperty = function (obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n};\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nexport var get = function get(object, property, receiver) {\n  if (object === null) object = Function.prototype;\n  var desc = Object.getOwnPropertyDescriptor(object, property);\n\n  if (desc === undefined) {\n    var parent = Object.getPrototypeOf(object);\n\n    if (parent === null) {\n      return undefined;\n    } else {\n      return get(parent, property, receiver);\n    }\n  } else if (\"value\" in desc) {\n    return desc.value;\n  } else {\n    var getter = desc.get;\n\n    if (getter === undefined) {\n      return undefined;\n    }\n\n    return getter.call(receiver);\n  }\n};\n\nexport var inherits = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n};\n\nvar _instanceof = function (left, right) {\n  if (right != null && typeof Symbol !== \"undefined\" && right[Symbol.hasInstance]) {\n    return right[Symbol.hasInstance](left);\n  } else {\n    return left instanceof right;\n  }\n};\n\nexport var interopRequireDefault = function (obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n};\n\nexport var interopRequireWildcard = function (obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n\n    newObj.default = obj;\n    return newObj;\n  }\n};\n\nexport var newArrowCheck = function (innerThis, boundThis) {\n  if (innerThis !== boundThis) {\n    throw new TypeError(\"Cannot instantiate an arrow function\");\n  }\n};\n\nexport var objectDestructuringEmpty = function (obj) {\n  if (obj == null) throw new TypeError(\"Cannot destructure undefined\");\n};\n\nexport var objectWithoutProperties = function (obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n};\n\nexport var possibleConstructorReturn = function (self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n};\n\nexport var selfGlobal = typeof global === \"undefined\" ? self : global;\n\nexport var set = function set(object, property, value, receiver) {\n  var desc = Object.getOwnPropertyDescriptor(object, property);\n\n  if (desc === undefined) {\n    var parent = Object.getPrototypeOf(object);\n\n    if (parent !== null) {\n      set(parent, property, value, receiver);\n    }\n  } else if (\"value\" in desc && desc.writable) {\n    desc.value = value;\n  } else {\n    var setter = desc.set;\n\n    if (setter !== undefined) {\n      setter.call(receiver, value);\n    }\n  }\n\n  return value;\n};\n\nexport var slicedToArray = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if (Symbol.iterator in Object(arr)) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\n\nexport var slicedToArrayLoose = function (arr, i) {\n  if (Array.isArray(arr)) {\n    return arr;\n  } else if (Symbol.iterator in Object(arr)) {\n    var _arr = [];\n\n    for (var _iterator = arr[Symbol.iterator](), _step; !(_step = _iterator.next()).done;) {\n      _arr.push(_step.value);\n\n      if (i && _arr.length === i) break;\n    }\n\n    return _arr;\n  } else {\n    throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n  }\n};\n\nexport var taggedTemplateLiteral = function (strings, raw) {\n  return Object.freeze(Object.defineProperties(strings, {\n    raw: {\n      value: Object.freeze(raw)\n    }\n  }));\n};\n\nexport var taggedTemplateLiteralLoose = function (strings, raw) {\n  strings.raw = raw;\n  return strings;\n};\n\nexport var temporalRef = function (val, name, undef) {\n  if (val === undef) {\n    throw new ReferenceError(name + \" is not defined - temporal dead zone\");\n  } else {\n    return val;\n  }\n};\n\nexport var temporalUndefined = {};\n\nexport var toArray = function (arr) {\n  return Array.isArray(arr) ? arr : Array.from(arr);\n};\n\nexport var toConsumableArray = function (arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) arr2[i] = arr[i];\n\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n};\n\nbabelHelpers;\n\nexport { _typeof as typeof, _extends as extends, _instanceof as instanceof }","export default class BaseController {\n  constructor(properties) {\n    Object.assign(this, properties || {});\n  }\n\n  main() {\n    throw new Error('Not implemented!');\n  }\n}\n","import React from 'components/react';\n\nexport default class UserLogin extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      login: 'mozilla',\n    };\n\n    this.server = props.server;\n\n    this.onChange = this.onChange.bind(this);\n    this.onFormSubmit = this.onFormSubmit.bind(this);\n  }\n\n  onChange(evt) {\n    const login = evt.target.value;\n    this.setState({ login });\n  }\n\n  onFormSubmit(evt) {\n    evt.preventDefault(); // Avoid redirection to /?.\n\n    this.server.login(this.state.login, 'password')\n      .then(() => {\n        location.hash = 'reminders';\n      });\n  }\n\n  render() {\n    return (\n      <form className=\"user-login\" onSubmit={this.onFormSubmit}>\n        <input value={this.state.login}\n               placeholder=\"Family name\"\n               className=\"user-login__name-field\"\n               onChange={this.onChange}/>\n        <button className=\"user-login__login-button\">\n          <img src=\"css/icons/next.svg\"/>\n        </button>\n      </form>\n    );\n  }\n}\n\nUserLogin.propTypes = {\n  server: React.PropTypes.object.isRequired,\n};\n","import React from 'components/react';\nimport ReactDOM from 'components/react-dom';\n\nimport BaseController from './base';\nimport UserLogin from '../views/user-login';\n\nconst ALLOWED_ACTIONS = ['login', 'logout'];\nconst DEFAULT_ACTION = ALLOWED_ACTIONS[0];\n\nexport default class UsersController extends BaseController {\n  main(action = DEFAULT_ACTION) {\n    if (!ALLOWED_ACTIONS.includes(action)) {\n      console.error(\n        `Bad users route: \"${action}\". Falling back to ${DEFAULT_ACTION}.`\n      );\n      action = DEFAULT_ACTION;\n    }\n\n    switch (action) {\n      case 'login':\n        this.login();\n        break;\n\n      case 'logout':\n        this.logout();\n        break;\n    }\n  }\n\n  login() {\n    ReactDOM.render(\n      React.createElement(UserLogin, { server: this.server }), this.mountNode\n    );\n  }\n\n  logout() {\n    this.server.logout()\n      .then(() => {\n        // Once logged out, we redirect to the login page.\n        location.hash = 'users/login';\n      });\n  }\n}\n","/* global TwitterCldr, TwitterCldrDataBundle */\n\nimport React from 'components/react';\nimport moment from 'components/moment';\nimport 'components/cldr/en';\nimport 'components/cldr/core';\n\nconst COLOURS = ['red', 'orange', 'green', 'blue', 'violet'];\n\nexport default class ReminderItem extends React.Component {\n  constructor(props) {\n    super(props);\n\n    TwitterCldr.set_data(TwitterCldrDataBundle);\n\n    this.listFormatter = new TwitterCldr.ListFormatter();\n    this.reminder = props.reminder;\n    this.onDelete = props.onDelete;\n  }\n\n  getColour(recipients = []) {\n    const name = recipients.join(' ');\n    const hash = (string) => {\n      let hash = 0, i, chr, len;\n      if (string.length === 0) {\n        return 0;\n      }\n      for (i = 0, len = string.length; i < len; i++) {\n        chr = string.charCodeAt(i);\n        hash = ((hash << 5) - hash) + chr;\n        hash |= 0; // Convert to 32bit integer\n      }\n      return hash;\n    };\n\n    return COLOURS[hash(name) % COLOURS.length];\n  }\n\n  render() {\n    const reminder = this.reminder;\n    const contentClassName = [\n      'reminders__item-content',\n      this.getColour(reminder.recipients),\n    ]\n      .join(' ');\n\n    return (\n      <li className=\"reminders__item\">\n        <div className=\"reminders__item-time\">\n          <div>{moment(reminder.datetime).format('LT')}</div>\n        </div>\n        <div className={contentClassName}>\n          <h3 className=\"reminders__item-recipient\">\n            {this.listFormatter.format(reminder.recipients)}\n          </h3>\n          <p className=\"reminders__item-text\">\n            {reminder.content}\n            <button className=\"reminders__delete\"\n                    onClick={this.onDelete}>\n              Delete\n            </button>\n          </p>\n        </div>\n      </li>\n    );\n  }\n}\n\nReminderItem.propTypes = {\n  reminder: React.PropTypes.object.isRequired,\n  onDelete: React.PropTypes.func.isRequired,\n};\n","import React from 'components/react';\n\nconst TYPES = [\n  'success',\n  'info',\n  'warning',\n  'danger',\n];\n\nexport default class Toaster extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      display: false,\n      message: '',\n      type: 'success',\n    };\n\n    this.duration = 6000;\n    this.timeout = null;\n    this.hide = this.hide.bind(this);\n  }\n\n  success(message) {\n    this.setState({ type: 'success' });\n    this.show(message);\n  }\n\n  info(message) {\n    this.setState({ type: 'info' });\n    this.show(message);\n  }\n\n  warning(message) {\n    this.setState({ type: 'warning' });\n    this.show(message);\n  }\n\n  danger(message) {\n    this.setState({ type: 'danger' });\n    this.show(message);\n  }\n\n  show(message = '') {\n    clearTimeout(this.timeout);\n    this.setState({ display: true, message });\n    this.timeout = setTimeout(this.hide, this.duration);\n  }\n\n  hide() {\n    this.setState({ display: false });\n  }\n\n  validateType(candidate) {\n    if (!TYPES.includes(candidate)) {\n      return TYPES[0];\n    }\n    return candidate;\n  }\n\n  render() {\n    const className = `toaster ${this.validateType(this.state.type)}`;\n    const transform = this.state.display ?\n      'translateY(0)' : 'translateY(-100%)';\n    return (\n      <div className={className} style={{ transform }}>\n        <p>{this.state.message}</p>\n      </div>\n    );\n  }\n}\n","import React from 'components/react';\nimport _ from 'components/lodash';\nimport moment from 'components/moment';\n\nimport ReminderItem from './reminders/reminder-item';\nimport Toaster from './toaster';\n\nexport default class Reminders extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      reminders: [],\n    };\n\n    this.speechController = props.speechController;\n    this.server = props.server;\n    this.refreshInterval = null;\n    this.toaster = null;\n    this.debugEvent = this.debugEvent.bind(this);\n    this.onReminder = this.onReminder.bind(this);\n    this.onParsingFailure = this.onParsingFailure.bind(this);\n    this.onWebPushMessage = this.onWebPushMessage.bind(this);\n\n    moment.locale(navigator.languages || navigator.language || 'en-US');\n  }\n\n  componentDidMount() {\n    this.server.reminders.getAll()\n      .then((reminders) => {\n        reminders = reminders.map((reminder) => ({\n          id: reminder.id,\n          recipients: reminder.recipients,\n          content: reminder.action,\n          datetime: reminder.due,\n        }));\n\n        this.setState({ reminders });\n      });\n\n    // Refresh the page every 5 minutes if idle.\n    this.refreshInterval = setInterval(() => {\n      if (this.speechController.idle) {\n        location.reload(true);\n      }\n    }, 5 * 60 * 1000);\n\n    this.speechController.on('wakelistenstart', this.debugEvent);\n    this.speechController.on('wakelistenstop', this.debugEvent);\n    this.speechController.on('wakeheard', this.debugEvent);\n    this.speechController.on('speechrecognitionstart', this.debugEvent);\n    this.speechController.on('speechrecognitionstop', this.debugEvent);\n    this.speechController.on('reminder', this.debugEvent);\n    this.speechController.on('reminder', this.onReminder);\n    this.speechController.on('parsing-failed', this.onParsingFailure);\n    this.server.on('push-message', this.onWebPushMessage);\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.refreshInterval);\n\n    this.speechController.off('wakelistenstart', this.debugEvent);\n    this.speechController.off('wakelistenstop', this.debugEvent);\n    this.speechController.off('wakeheard', this.debugEvent);\n    this.speechController.off('speechrecognitionstart', this.debugEvent);\n    this.speechController.off('speechrecognitionstop', this.debugEvent);\n    this.speechController.off('reminder', this.debugEvent);\n    this.speechController.off('reminder', this.onReminder);\n    this.speechController.off('parsing-failed', this.onParsingFailure);\n    this.server.off('push-message', this.onWebPushMessage);\n  }\n\n  debugEvent(evt) {\n    if (evt.result !== undefined) {\n      console.log(evt.type, evt.result);\n      return;\n    }\n\n    console.log(evt.type);\n  }\n\n  onReminder(evt) {\n    const reminder = evt.result;\n\n    // @todo Nice to have: optimistic update.\n    // https://github.com/fxbox/calendar/issues/32\n    this.server.reminders\n      .set({\n        recipients: reminder.users,\n        action: reminder.action,\n        due: Number(reminder.time),\n      })\n      .then((savedReminder) => {\n        const reminders = this.state.reminders;\n\n        reminders.push({\n          id: savedReminder.id,\n          recipients: savedReminder.recipients,\n          content: savedReminder.action,\n          datetime: savedReminder.due,\n        });\n\n        this.setState({ reminders });\n\n        this.toaster.success(reminder.confirmation);\n        this.speechController.speak(reminder.confirmation);\n      })\n      .catch((res) => {\n        console.error('Saving the reminder failed.', res);\n        const message = 'This reminder could not be saved. ' +\n          'Please try again later.';\n        this.toaster.warning(message);\n        this.speechController.speak(message);\n      });\n  }\n\n  onParsingFailure() {\n    const message = 'I did not understand that. Can you repeat?';\n    this.toaster.warning(message);\n    this.speechController.speak(message);\n  }\n\n  onWebPushMessage(message) {\n    const id = message.fullMessage.id;\n\n    // We don't want to delete them, merely remove it from our local state.\n    // At reload, we shouldn't get it because their status changed server-side\n    // too.\n    const reminders = this.state.reminders\n      .filter((reminder) => reminder.id !== id);\n    this.setState({ reminders });\n  }\n\n  onDelete(id) {\n    // @todo Nice to have: optimistic update.\n    // https://github.com/fxbox/calendar/issues/32\n    this.server.reminders.delete(id)\n      .then(() => {\n        const reminders = this.state.reminders\n          .filter((reminder) => reminder.id !== id);\n        this.setState({ reminders });\n      })\n      .catch(() => {\n        console.error(`The reminder ${id} could not be deleted.`);\n      });\n  }\n\n  // @todo Add a different view when there's no reminders:\n  // https://github.com/fxbox/calendar/issues/16\n  render() {\n    let reminders = this.state.reminders;\n\n    // Sort all the reminders chronologically.\n    reminders = reminders.sort((a, b) => {\n      return a.datetime - b.datetime;\n    });\n\n    // Group the reminders by month.\n    reminders = _.groupBy(reminders, (reminder) => {\n      return moment(reminder.datetime).format('YYYY/MM');\n    });\n\n    // For each month, group the reminders by day.\n    Object.keys(reminders).forEach((month) => {\n      reminders[month] = _.groupBy(reminders[month], (reminder) => {\n        return moment(reminder.datetime).format('YYYY/MM/DD');\n      });\n    });\n\n    const reminderNodes = Object.keys(reminders).map((key) => {\n      const month = moment(key, 'YYYY/MM').format('MMMM');\n      const reminderMonth = reminders[key];\n\n      return (\n        <div key={key}>\n          <h2 className=\"reminders__month\">{month}</h2>\n          {Object.keys(reminderMonth).map((key) => {\n            const date = moment(key, 'YYYY/MM/DD');\n            const remindersDay = reminderMonth[key];\n\n            return (\n              <div key={key} className=\"reminders__day\">\n                <div className=\"reminders__day-date\">\n                  <div className=\"reminders__day-mday\">\n                    {date.format('DD')}\n                  </div>\n                  <div className=\"reminders__day-wday\">\n                    {date.format('ddd')}\n                  </div>\n                </div>\n                <ol className=\"reminders__list\">\n                  {remindersDay.map((reminder) => {\n                    return (<ReminderItem\n                      key={reminder.id}\n                      reminder={reminder}\n                      onDelete={this.onDelete.bind(this, reminder.id)}\n                    />);\n                  })}\n                </ol>\n              </div>\n            );\n          })}\n        </div>\n      );\n    });\n\n    return (\n      <section className=\"reminders\">\n        <Toaster ref={(t) => this.toaster = t}/>\n        {reminderNodes}\n      </section>\n    );\n  }\n}\n\nReminders.propTypes = {\n  speechController: React.PropTypes.object.isRequired,\n  server: React.PropTypes.object.isRequired,\n};\n","import React from 'components/react';\n\nexport default class Microphone extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isListening: false,\n    };\n\n    this.speechController = props.speechController;\n    this.server = props.server;\n    this.bleep = new Audio();\n\n    this.bleep.src = 'media/cue.wav';\n\n    this.speechController.on('wakeheard', () => {\n      this.bleep.pause();\n      this.bleep.currentTime = 0;\n      this.bleep.play();\n      this.setState({ isListening: true });\n    });\n    this.speechController.on('speechrecognitionstop', () => {\n      this.setState({ isListening: false });\n    });\n\n    this.click = this.click.bind(this);\n  }\n\n  click() {\n    if (!this.state.isListening) {\n      this.bleep.pause();\n      this.bleep.currentTime = 0;\n      this.bleep.play();\n      this.setState({ isListening: true });\n      this.speechController.startSpeechRecognition();\n      return;\n    }\n\n    this.bleep.pause();\n    this.setState({ isListening: false });\n    this.speechController.stopSpeechRecognition();\n  }\n\n  render() {\n    if (!this.server.isLoggedIn) {\n      return null;\n    }\n\n    const className = this.state.isListening ? 'listening' : '';\n\n    return (\n      <div className={className} onClick={this.click}>\n        <div className=\"microphone__background\"></div>\n        <img className=\"microphone__icon\" src=\"css/icons/microphone.svg\"/>\n      </div>\n    );\n  }\n}\n\nMicrophone.propTypes = {\n  speechController: React.PropTypes.object.isRequired,\n  server: React.PropTypes.object.isRequired,\n};\n","import React from 'components/react';\nimport ReactDOM from 'components/react-dom';\n\nimport BaseController from './base';\n\nimport Reminders from '../views/reminders';\nimport Microphone from '../views/microphone';\n\nexport default class RemindersController extends BaseController {\n  main() {\n    ReactDOM.render(\n      React.createElement(Reminders, {\n        speechController: this.speechController,\n        server: this.server,\n      }), this.mountNode\n    );\n\n    ReactDOM.render(\n      React.createElement(Microphone, {\n        speechController: this.speechController,\n        server: this.server,\n      }), document.querySelector('.microphone')\n    );\n  }\n}\n","'use strict';\n\n/*\n * This file provides an helper to add custom events to any object.\n *\n * In order to use this functionality with any object consumer should extend\n * target object class with EventDispatcher:\n *\n * class Obj extends EventDispatcher {}\n * const obj = new Obj();\n *\n * A list of events can be optionally provided and it is recommended to do so.\n * If a list is provided then only the events present in the list will be\n * allowed. Using events not present in the list will cause other functions to\n * throw an error:\n *\n * class Obj extends EventDispatcher {\n *   constructor() {\n *     super(['somethinghappened', 'somethingelsehappened']);\n *   }\n * }\n * const obj = new Obj();\n *\n * The object will have five new methods: 'on', 'once', 'off', 'offAll' and\n * 'emit'. Use 'on' to register a new event-handler:\n *\n * obj.on(\"somethinghappened\", function onSomethingHappened() { ... });\n *\n * If the same event-handler is added multiple times then only one will be\n * registered, e.g.:\n *\n * function onSomethingHappened() { ... }\n * obj.on(\"somethinghappened\", onSomethingHappened);\n * obj.on(\"somethinghappened\", onSomethingHappened); // Does nothing\n *\n * Use 'off' to remove a registered listener:\n *\n * obj.off(\"somethinghappened\", onSomethingHappened);\n *\n * Use 'once' to register a one-time event-handler: it will be automatically\n * unregistered after being called.\n *\n * obj.once(\"somethinghappened\", function onSomethingHappened() { ... });\n *\n * And use 'offAll' to remove all registered event listeners for the specified\n * event:\n *\n * obj.offAll(\"somethinghappened\");\n *\n * When used without parameters 'offAll' removes all registered event handlers,\n * this can be useful when writing unit-tests.\n *\n * Finally use 'emit' to send an event to the registered handlers:\n *\n * obj.emit(\"somethinghappened\");\n *\n * An optional parameter can be passed to 'emit' to be passed to the registered\n * handlers:\n *\n * obj.emit(\"somethinghappened\", 123);\n */\n\nconst assertValidEventName = function(eventName) {\n  if (!eventName || typeof eventName !== 'string') {\n    throw new Error('Event name should be a valid non-empty string!');\n  }\n};\n\nconst assertValidHandler = function(handler) {\n  if (typeof handler !== 'function') {\n    throw new Error('Handler should be a function!');\n  }\n};\n\nconst assertAllowedEventName = function(allowedEvents, eventName) {\n  if (allowedEvents && allowedEvents.indexOf(eventName) < 0) {\n    throw new Error(`Event \"${eventName}\" is not allowed!`);\n  }\n};\n\nconst p = Object.freeze({\n  allowedEvents: Symbol('allowedEvents'),\n  listeners: Symbol('listeners'),\n});\n\nexport default class EventDispatcher {\n  constructor(allowedEvents) {\n    if (typeof allowedEvents !== 'undefined' && !Array.isArray(allowedEvents)) {\n      throw new Error('Allowed events should be a valid array of strings!');\n    }\n\n    this[p.listeners] = new Map();\n    this[p.allowedEvents] = allowedEvents;\n  }\n\n  /**\n   * Registers listener function to be executed once event occurs.\n   *\n   * @param {string} eventName Name of the event to listen for.\n   * @param {function} handler Handler to be executed once event occurs.\n   */\n  on(eventName, handler) {\n    assertValidEventName(eventName);\n    assertAllowedEventName(this[p.allowedEvents], eventName);\n    assertValidHandler(handler);\n\n    let handlers = this[p.listeners].get(eventName);\n    if (!handlers) {\n      handlers = new Set();\n      this[p.listeners].set(eventName, handlers);\n    }\n\n    // Set.add ignores handler if it has been already registered.\n    handlers.add(handler);\n  }\n\n  /**\n   * Registers listener function to be executed only first time when event\n   * occurs.\n   *\n   * @param {string} eventName Name of the event to listen for.\n   * @param {function} handler Handler to be executed once event occurs.\n   */\n  once(eventName, handler) {\n    assertValidHandler(handler);\n\n    const once = (parameters) => {\n      this.off(eventName, once);\n\n      handler.call(this, parameters);\n    };\n\n    this.on(eventName, once);\n  }\n\n  /**\n   * Removes registered listener for the specified event.\n   *\n   * @param {string} eventName Name of the event to remove listener for.\n   * @param {function} handler Handler to remove, so it won't be executed\n   * next time event occurs.\n   */\n  off(eventName, handler) {\n    assertValidEventName(eventName);\n    assertAllowedEventName(this[p.allowedEvents], eventName);\n    assertValidHandler(handler);\n\n    const handlers = this[p.listeners].get(eventName);\n    if (!handlers) {\n      return;\n    }\n\n    handlers.delete(handler);\n\n    if (!handlers.size) {\n      this[p.listeners].delete(eventName);\n    }\n  }\n\n  /**\n   * Removes all registered listeners for the specified event.\n   *\n   * @param {string=} eventName Name of the event to remove all listeners for.\n   */\n  offAll(eventName) {\n    if (typeof eventName === 'undefined') {\n      this[p.listeners].clear();\n      return;\n    }\n\n    assertValidEventName(eventName);\n    assertAllowedEventName(this[p.allowedEvents], eventName);\n\n    const handlers = this[p.listeners].get(eventName);\n    if (!handlers) {\n      return;\n    }\n\n    handlers.clear();\n\n    this[p.listeners].delete(eventName);\n  }\n\n  /**\n   * Emits specified event so that all registered handlers will be called\n   * with the specified parameters.\n   *\n   * @param {string} eventName Name of the event to call handlers for.\n   * @param {Object=} parameters Optional parameters that will be passed to\n   * every registered handler.\n   */\n  emit(eventName, parameters) {\n    assertValidEventName(eventName);\n    assertAllowedEventName(this[p.allowedEvents], eventName);\n\n    const handlers = this[p.listeners].get(eventName);\n    if (!handlers) {\n      return;\n    }\n\n    handlers.forEach((handler) => {\n      try {\n        handler.call(this, parameters);\n      } catch (error) {\n        console.error(error);\n      }\n    });\n  }\n\n  /**\n   * Checks if there are any listeners that listen for the specified event.\n   *\n   * @param {string} eventName Name of the event to check listeners for.\n   * @returns {boolean}\n   */\n  hasListeners(eventName) {\n    assertValidEventName(eventName);\n    assertAllowedEventName(this[p.allowedEvents], eventName);\n\n    return this[p.listeners].has(eventName);\n  }\n}\n","'use strict';\n\nimport JsSpeechRecognizer from 'components/jsspeechrecognizer';\n\nexport default class WakeWordRecogniser {\n  constructor(options = {}) {\n    const minimumConfidence = options.minimumConfidence || 0.35;\n    const bufferCount = options.bufferCount || 80;\n    const maxVoiceActivityGap = options.maxVoiceActivityGap || 300;\n    const numGroups = options.numGroups || 60;\n    const groupSize = options.groupSize || 5;\n\n    this.recogniser = new JsSpeechRecognizer();\n\n    this.recogniser.keywordSpottingMinimumConfidence = minimumConfidence;\n    this.recogniser.keywordSpottingBufferCount = bufferCount;\n    this.recogniser.keywordSpottingMaxVoiceActivityGap = maxVoiceActivityGap;\n    this.recogniser.numGroups = numGroups;\n    this.recogniser.groupSize = groupSize;\n\n    Object.seal(this);\n  }\n\n  startListening() {\n    return new Promise((resolve) => {\n      this.recogniser.closeMic(); // Make sure we don't start another instance\n      this.recogniser.openMic();\n      if (!this.recogniser.isRecording()) {\n        this.recogniser.startKeywordSpottingRecording();\n      }\n\n      resolve();\n    });\n  }\n\n  stopListening() {\n    return new Promise((resolve) => {\n      if (this.recogniser.isRecording()) {\n        this.recogniser.stopRecording();\n      }\n\n      this.recogniser.closeMic();\n\n      resolve();\n    });\n  }\n\n  loadModel(modelData) {\n    if (this.recogniser.isRecording()) {\n      throw new Error(\n        'Load the model data before listening for wakeword');\n    }\n\n    this.recogniser.model = modelData;\n  }\n\n  setOnKeywordSpottedCallback(fn) {\n    this.recogniser.keywordSpottedCallback = fn;\n  }\n}\n","'use strict';\n\nconst p = Object.freeze({\n  isListening: Symbol('isListening'),\n  recognition: Symbol('recognition'),\n  supportsRecognition: Symbol('supportsRecognition'),\n});\n\nexport default class SpeechRecogniser {\n  constructor() {\n    this[p.isListening] = false;\n\n    const Recognition =\n      window.SpeechRecognition || window.webkitSpeechRecognition;\n\n    const supportsRecognition = !!Recognition;\n\n    this[p.supportsRecognition] = supportsRecognition;\n\n    if (supportsRecognition) {\n      this[p.recognition] = new Recognition();\n      // Continuous mode prevents Android from being stuck for 5 seconds between\n      // the last word said and the results to come in.\n      this[p.recognition].continuous = true;\n    } else {\n      this[p.recognition] = null;\n    }\n\n    Object.seal(this);\n  }\n\n  listenForUtterance() {\n    if (!this[p.supportsRecognition]) {\n      return Promise.reject(\n        new Error('Speech recognition not supported in this browser'));\n    }\n\n    if (this[p.isListening]) {\n      return Promise.reject(\n        new Error('Speech recognition is already listening'));\n    }\n\n    return new Promise((resolve, reject) => {\n      this[p.isListening] = true;\n\n      // Not using `addEventListener` here to avoid\n      // `removeEventListener` everytime it's simpler\n      // to just redefine `onresult` to the same effect.\n      this[p.recognition].onresult = (event) => {\n        // Due to continuous mode, many results may arrive. We choose to only\n        // return the first result and to forget about the following ones.\n        if (this[p.isListening]) {\n          this[p.recognition].stop();\n          this[p.isListening] = false;\n\n          // Always take first result\n          const result = event.results[0][0];\n\n          return resolve({\n            confidence: result.confidence,\n            utterance: result.transcript,\n          });\n        }\n      };\n\n      this[p.recognition].onerror = (error) => {\n        this[p.recognition].stop();\n        this[p.isListening] = false;\n        return reject(error);\n      };\n\n      this[p.recognition].start();\n    });\n  }\n\n  abort() {\n    // @xxx abort() should be used, but throws an error that puts the app in an\n    // unusable state. In more details, when we used it, we kept getting a\n    // SpeechRecognitionError with the code \"network\" (and no extra information)\n    // Our investigation showed that network or the server side is not to blame\n    // but it's a border effect of using webkitSpeechRecognition and\n    // JsSpeechRecognizer at the same time.\n    // Using stop() sends data to STT servers but we will get errors like\n    // SpeechRecognitionError (code \"no-speech\") or if something was heard, the\n    // pattern won't be matched.\n    this[p.recognition].stop();\n    this[p.isListening] = false;\n\n    return Promise.resolve();\n  }\n}\n","'use strict';\n\nconst p = Object.freeze({\n  // Properties\n  synthesis: Symbol('synthesis'),\n  supportsSynthesis: Symbol('supportsSynthesis'),\n  preferredVoice: Symbol('preferredVoice'),\n  initialised: Symbol('initialised'),\n\n  // Methods\n  setPreferredVoice: Symbol('setPreferredVoice'),\n});\n\nconst VOICE_PITCH = 0.8;\nconst VOICE_RATE = 0.9;\n\nexport default class SpeechSynthesis {\n  constructor() {\n    const synthesis = window.speechSynthesis;\n\n    this[p.initialised] = false;\n    this[p.supportsSynthesis] = !!synthesis;\n    this[p.preferredVoice] = null;\n\n    if (this[p.supportsSynthesis]) {\n      this[p.synthesis] = synthesis;\n      this[p.setPreferredVoice]();\n      this[p.synthesis].onvoiceschanged = this[p.setPreferredVoice].bind(this);\n    } else {\n      this[p.synthesis] = null;\n    }\n\n    Object.seal(this);\n  }\n\n  /**\n   * Speak a text aloud.\n   *\n   * @param {string} text\n   */\n  speak(text = '') {\n    if (!text) {\n      return;\n    }\n\n    const utterance = new SpeechSynthesisUtterance(text);\n\n    if (this[p.preferredVoice]) {\n      // Use a preferred voice if available.\n      utterance.voice = this[p.preferredVoice];\n    }\n    utterance.lang = 'en';\n    utterance.pitch = VOICE_PITCH;\n    utterance.rate = VOICE_RATE;\n\n    this[p.synthesis].speak(utterance);\n  }\n\n  /**\n   * From all the voices available, set the default language to English with a\n   * female voice if available.\n   */\n  [p.setPreferredVoice]() {\n    if (this[p.initialised]) {\n      return;\n    }\n\n    const voices = this[p.synthesis].getVoices();\n\n    if (!voices.length) {\n      return;\n    }\n\n    const englishVoices = voices\n      .filter((voice) => voice.lang === 'en' || voice.lang.startsWith('en-'));\n\n    const femaleVoices = englishVoices\n      .filter((voice) => voice.name.includes('Female'));\n\n    if (femaleVoices.length) {\n      this[p.preferredVoice] = femaleVoices[0];\n    } else if (englishVoices.length) {\n      this[p.preferredVoice] = englishVoices[0];\n    }\n\n    this[p.initialised] = true;\n    this[p.synthesis].onvoiceschanged = null;\n  }\n}\n","/* global TwitterCldr, TwitterCldrDataBundle */\n\n'use strict';\n\nimport moment from 'components/moment';\nimport 'components/cldr/en';\nimport 'components/cldr/core';\n\n/*\n * @todo:\n *   * @see http://www.unicode.org/cldr/charts/29/verify/dates/en.html\n *     for formatting the time of the day.\n */\n\nconst p = Object.freeze({\n  // Properties\n  listFormatter: Symbol('listFormatter'),\n\n  // Methods\n  getLocalised: Symbol('getLocalised'),\n  formatUser: Symbol('formatUser'),\n  formatAction: Symbol('formatAction'),\n  formatTime: Symbol('formatTime'),\n  isToday: Symbol('isToday'),\n  isTomorrow: Symbol('isTomorrow'),\n  isThisMonth: Symbol('isThisMonth'),\n  formatHoursAndMinutes: Symbol('formatHoursAndMinutes'),\n});\n\nconst DEFAULT_LOCALE = 'en';\nconst PATTERNS = {\n  en: {\n    template: `OK, I'll remind [users] [action] [time].`,\n    formatUser: (user) => user\n      .replace(/\\bme\\b/gi, 'you')\n      .replace(/\\bI\\b/gi, 'you')\n      .replace(/\\bmy\\b/gi, 'your')\n      .replace(/\\bmine\\b/gi, 'yours'),\n  },\n  fr: {\n    template: `OK, je rappelerai [users] [action] [time].`,\n    formatUser: (user) => user,\n  },\n  ja: {\n    template: `承知しました。[time][users]に[action]をリマインドします。`,\n    formatUser: (user) => user,\n  },\n};\n\nexport default class Confirmation {\n  constructor(locale = DEFAULT_LOCALE) {\n    this.locale = locale;\n\n    TwitterCldr.set_data(TwitterCldrDataBundle);\n\n    this[p.listFormatter] = new TwitterCldr.ListFormatter();\n  }\n\n  /**\n   * Generate a phrase to be spoken to confirm a reminder.\n   *\n   * @param {Object} reminder\n   * @return {string}\n   */\n  getReminderMessage(reminder) {\n    const template = this[p.getLocalised]('template');\n    const data = {\n      users: this[p.formatUser](reminder),\n      action: this[p.formatAction](reminder),\n      time: this[p.formatTime](reminder),\n    };\n\n    return template.replace(/\\[([^\\]]+)\\]/g, (match, placeholder) => {\n      return data[placeholder];\n    });\n  }\n\n  /**\n   * Given a property of the PATTERNS object, returns the one matching the\n   * current locale or the default one if non existing.\n   *\n   * @param {string} prop\n   * @returns {*}\n   */\n  [p.getLocalised](prop) {\n    let locale = this.locale;\n    if (!PATTERNS[this.locale] || !PATTERNS[this.locale][prop]) {\n      locale = DEFAULT_LOCALE;\n    }\n\n    return PATTERNS[locale][prop];\n  }\n\n  [p.formatUser](reminder) {\n    const formatUser = this[p.getLocalised]('formatUser');\n    const users = reminder.users.map(formatUser);\n    return this[p.listFormatter].format(users);\n  }\n\n  [p.formatAction](reminder) {\n    const formatUser = this[p.getLocalised]('formatUser');\n    const action = formatUser(reminder.action);\n    const PATTERN1 = new RegExp(`\\\\bthat \\\\[action\\\\]`, 'iu');\n    const PATTERN2 = new RegExp(`\\\\bit is \\\\[action\\\\]`, 'iu');\n\n    if (PATTERN1.test(reminder.match)) {\n      return `that ${action}`;\n    } else if (PATTERN2.test(reminder.match)) {\n      return `that it is ${action}`;\n    }\n\n    return `to ${action}`;\n  }\n\n  [p.formatTime](reminder) {\n    const date = reminder.time;\n    let time = '';\n\n    if (this[p.isToday](date)) {\n      const hour = this[p.formatHoursAndMinutes](date);\n      time = `at ${hour} today`;\n    } else if (this[p.isTomorrow](date)) {\n      const hour = this[p.formatHoursAndMinutes](date);\n      time = `at ${hour} tomorrow`;\n    } else if (this[p.isThisMonth](date)) {\n      time = moment(date).format('[on the] Do');\n    } else {\n      time = moment(date).format('[on] MMMM [the] Do');\n    }\n\n    return time;\n  }\n\n  [p.isToday](date) {\n    const today = moment().startOf('day');\n    const tomorrow = moment().add(1, 'day').startOf('day');\n    return moment(date).isBetween(today, tomorrow);\n  }\n\n  [p.isTomorrow](date) {\n    const tomorrow = moment().add(1, 'day').startOf('day');\n    const in2days = moment().add(2, 'day').startOf('day');\n    return moment(date).isBetween(tomorrow, in2days);\n  }\n\n  [p.isThisMonth](date) {\n    const thisMonth = moment().startOf('month');\n    const nextMonth = moment().add(1, 'month').startOf('month');\n    return moment(date).isBetween(thisMonth, nextMonth);\n  }\n\n  /**\n   * Return a string from a date suitable for speech synthesis.\n   *\n   * @param {Date} date\n   * @return {string}\n   */\n  [p.formatHoursAndMinutes](date) {\n    date = moment(date);\n    if (date.minute() === 0) {\n      return date.format('h A'); // 7 PM\n    } else if (date.minute() === 15) {\n      return date.format('[quarter past] h A');\n    } else if (date.minute() === 30) {\n      return date.format('[half past] h A');\n    } else if (date.minute() === 45) {\n      const nextHour = date.add(1, 'hour');\n      return nextHour.format('[quarter to] h A');\n    }\n    return date.format('h m A'); // 6 24 AM\n  }\n}\n","'use strict';\n\nimport chrono from 'components/chrono';\n\n/**\n * Parse day periods according to CLDR.\n * @see http://www.unicode.org/cldr/charts/29/verify/dates/en.html\n */\nconst dayPeriodsParser = new chrono.Parser();\ndayPeriodsParser.pattern =\n  () => new RegExp('midnight|morning|in the morning|noon|' +\n    'afternoon|in the afternoon|evening|in the evening|night|at night', 'i');\ndayPeriodsParser.extract = (text, ref, match) => {\n  let hour;\n  let meridiem;\n\n  switch (match[0].toLowerCase()) {\n    case 'midnight':\n      hour = 0;\n      meridiem = 0;\n      break;\n    case 'morning':\n    case 'in the morning':\n      hour = 9;\n      meridiem = 0;\n      break;\n    case 'noon':\n      hour = 12;\n      meridiem = 1;\n      break;\n    case 'afternoon':\n    case 'in the afternoon':\n      hour = 15;\n      meridiem = 1;\n      break;\n    case 'evening':\n    case 'in the evening':\n      hour = 19;\n      meridiem = 1;\n      break;\n    case 'night':\n    case 'at night':\n      hour = 10;\n      meridiem = 1;\n      break;\n  }\n\n  return new chrono.ParsedResult({\n    ref,\n    text: match[0],\n    index: match.index,\n    start: {\n      hour,\n      meridiem,\n    },\n  });\n};\n\n/**\n * When the meridiem is not specified, set the time to after the current time.\n * `at 5 today` (current time is 3pm) => `5pm`.\n */\nconst forwardHoursRefiner = new chrono.Refiner();\nforwardHoursRefiner.refine = (text, results, opt = {}) => {\n  if (opt.forwardHoursOnly !== true) {\n    return results;\n  }\n\n  // If the date is today and there is no AM/PM (meridiem) specified,\n  // let all the time be after the current time.\n  results.forEach((result) => {\n    changeDate(result.start, result.ref);\n    if (result.end) {\n      changeDate(result.end, result.ref);\n    }\n  });\n\n  return results;\n\n  function changeDate(component, ref) {\n    if (!component.isCertain('meridiem')\n      && component.get('year') === ref.getFullYear()\n      && component.get('month') === ref.getMonth() + 1\n      && component.get('day') === ref.getDate()\n      && component.get('hour') < ref.getHours()) {\n      component.assign('meridiem', 1);\n      component.assign('hour', component.get('hour') + 12);\n    }\n  }\n};\n\nconst customChrono = new chrono.Chrono(chrono.options.casualOption());\ncustomChrono.parsers.push(dayPeriodsParser);\ncustomChrono.refiners.push(forwardHoursRefiner);\n\nexport default {\n  parse: (phrase) => customChrono.parse(phrase, new Date(), {\n    forwardDatesOnly: true,\n    forwardHoursOnly: true,\n  }),\n};\n","'use strict';\n\nimport Confirmation from './intent-parser/confirmation';\nimport chrono from './intent-parser/chrono';\n\n/*\nExamples of supported phrases:\nRemind me to pick Sasha from Santa Clara University at 5PM today.\nRemind me that it is picnic day on July 4th.\nRemind us to go to the opera at 7:15pm on 2nd February.\nRemind us to go at my mum's at 11:30am on 31st July.\nRemind everybody to pack their stuff by next Friday 5pm.\nRemind me that every Tuesday night is trash day.\n\nTo add:\nRemind me every Tuesday to take the bin out.\nRemind Guillaume on Thursdays evening to go to his drawing class.\nRemind me that I should prepare my appointment tomorrow morning.\n*/\n\n/*\n * @todo:\n *   * Use CLDR to:\n *     * Generate placeholders.users\n *     * Generate placeholders.listBreaker\n *     * Generate placeholders.punctuation\n */\n\nconst p = Object.freeze({\n  // Properties\n  confirmation: Symbol('confirmation'),\n  patterns: Symbol('patterns'),\n\n  // Methods\n  parseUsers: Symbol('parseUsers'),\n  parseAction: Symbol('parseAction'),\n  parseDatetime: Symbol('parseDatetime'),\n  normalise: Symbol('normalise'),\n  init: Symbol('init'),\n  buildPatterns: Symbol('buildPatterns'),\n  splitOnPlaceholders: Symbol('splitOnPlaceholders'),\n  escape: Symbol('escape'),\n});\n\nconst PATTERNS = {\n  en: {\n    patterns: [\n      `Remind [users] to [action] at [time].`,\n      `Remind [users] to [action] on [time].`,\n      `Remind [users] to [action] by [time].`,\n      `Remind [users] at [time] to [action].`,\n      `Remind [users] on [time] to [action].`,\n      `Remind [users] by [time] to [action].`,\n      `Remind [users] to [action].`,\n      `Remind [users] that it is [action] on [time].`,\n      `Remind [users] that it is [action] at [time].`,\n      `Remind [users] that it is [action] by [time].`,\n      `Remind [users] that it is [action].`,\n      `Remind [users] that [action] at [time].`,\n      `Remind [users] that [action] on [time].`,\n      `Remind [users] that [action] by [time].`,\n      `Remind [users] that [action].`,\n      `Remind [users] that [time] is [action].`,\n    ],\n    placeholders: {\n      users: '( \\\\S+ | \\\\S+,? and \\\\S+ )',\n      action: '(.+)',\n      time: '(.+)',\n    },\n    // @see http://www.unicode.org/cldr/charts/29/summary/en.html#4\n    punctuation: new RegExp(\n      `[-‐–—,;:!?.…'‘’\"“”()\\\\[\\\\]§@*/&#†‡′″]+$`, 'u'),\n    // @see http://www.unicode.org/cldr/charts/29/summary/en.html#6402\n    listBreaker: new RegExp(`,|, and\\\\b|\\\\band\\\\b`, 'gu'),\n  },\n  fr: {\n    patterns: [\n      `Rappelle [users] de [action] [time].`,\n      `Rappelle [users] d'[action] [time].`,\n      `Rappelle-[users] de [action] [time].`,\n      `Rappelle-[users] d'[action] [time].`,\n    ],\n    placeholders: {\n      users: '( \\\\S+ | \\\\S+ et \\\\S+ )',\n      action: '(.+)',\n      time: '(.+)',\n    },\n    punctuation: new RegExp(\n      `[-‐–—,;:!?.…’\"“”«»()\\\\[\\\\]§@*/&#†‡]+$`, 'u'),\n    listBreaker: new RegExp(`,|\\\\bet\\\\b`, 'gu'),\n  },\n  ja: {\n    patterns: [\n      `[time][action]を[users]に思い出させて。`,\n      `[time][users]に[action]を思い出させて。`,\n      `[time][users]は[action]と言うリマインダーを作成して。`,\n    ],\n    placeholders: {\n      users: '(\\\\S+|\\\\S+、\\\\S+)',\n      action: '(.+)',\n      time: '(.+)',\n    },\n    punctuation: new RegExp(\n      `[-‾_＿－‐—―〜・･,，、､;；:：!！?？.．‥…。｡＇‘’\"＂“”(（)）\\\\[［\\\\]］{｛}｝` +\n      `〈〉《》「｢」｣『』【】〔〕‖§¶@＠*＊/／\\＼&＆#＃%％‰†‡′″〃※]+$`, 'u'),\n    listBreaker: new RegExp(`、`, 'gu'),\n  },\n};\n\nexport default class IntentParser {\n  constructor(locale = 'en') {\n    this.locale = locale;\n    this[p.confirmation] = new Confirmation(locale);\n    this[p.patterns] = {};\n\n    this[p.init]();\n\n    window.intentParser = this;\n\n    Object.seal(this);\n  }\n\n  parse(phrase = '') {\n    if (!phrase) {\n      return Promise.reject('Empty string.');\n    }\n\n    return new Promise((resolve, reject) => {\n      phrase = this[p.normalise](phrase);\n      const { time, processedPhrase } = this[p.parseDatetime](phrase);\n\n      if (!time) {\n        return reject('Time could not be parsed.');\n      }\n\n      const successful = this[p.patterns][this.locale].some((pattern) => {\n        if (!pattern.regexp.test(processedPhrase)) {\n          return false;\n        }\n\n        const segments = pattern.regexp.exec(processedPhrase);\n        segments.shift();\n\n        const users = this[p.parseUsers](\n          segments[pattern.placeholders.users], phrase\n        );\n        const action = this[p.parseAction](\n          segments[pattern.placeholders.action], phrase\n        );\n\n        // The original pattern matching the intent.\n        const match = pattern.match;\n\n        const confirmation = this[p.confirmation].getReminderMessage({\n          users,\n          action,\n          time,\n          match,\n        });\n\n        resolve({ users, action, time, confirmation });\n        return true;\n      });\n\n      if (!successful) {\n        return reject('Unsupported intent format.');\n      }\n    });\n  }\n\n  [p.parseUsers](string = '') {\n    return string\n      .split(PATTERNS[this.locale].listBreaker)\n      .map((user) => user.trim());\n  }\n\n  [p.parseAction](string = '') {\n    return string.trim();\n  }\n\n  [p.parseDatetime](phrase = '') {\n    phrase = phrase.trim();\n\n    const dates = chrono.parse(phrase);\n\n    if (!dates.length) {\n      return { time: null, processedPhrase: '' };\n    }\n\n    if (dates.length > 1) {\n      console.error('More than 2 temporal components detected.');\n    }\n\n    const date = dates[0];\n    const time = date.start.date();\n\n    const processedPhrase = phrase.substr(0, date.index) +\n      phrase.substr(date.index + date.text.length);\n\n    return { time, processedPhrase };\n  }\n\n  [p.normalise](string = '', locale = this.locale) {\n    // Normalise whitespaces to space.\n    return string\n      .replace(/\\s+/g, ' ')\n      // The Web Speech API returns PM hours as `p.m.`.\n      .replace(/([0-9]) p\\.m\\./gi, '$1 PM')\n      .replace(/([0-9]) a\\.m\\./gi, '$1 AM')\n      .trim()\n      // Strip punctuations.\n      .replace(PATTERNS[locale].punctuation, '');\n  }\n\n  /**\n   * Build the `patterns` property as an object mapping locale code to list of\n   * patterns.\n   */\n  [p.init]() {\n    Object.keys(PATTERNS).forEach((locale) => {\n      this[p.patterns][locale] = PATTERNS[locale].patterns.map((phrase) =>\n        this[p.buildPatterns](locale, phrase, PATTERNS[locale].placeholders));\n    });\n  }\n\n  [p.buildPatterns](locale = this.locale, match = '', placeholders) {\n    const phrase = this[p.normalise](match, locale);\n    const tokens = this[p.splitOnPlaceholders](phrase);\n    const order = {};\n    let placeholderIndex = 0;\n\n    const pattern = tokens\n      .map((token) => {\n        if (token.startsWith('[')) {\n          const placeholder = token\n            .substr(1)\n            // Strip trailing `]` if any.\n            .replace(new RegExp('\\\\]$', 'u'), '');\n\n          // The order of the placeholders can be different depending on the\n          // pattern or language. When we parse a string, we need to match the\n          // regexp captured masks to the placeholder given its position.\n          order[placeholder] = placeholderIndex;\n          placeholderIndex++;\n\n          return placeholders[placeholder];\n        }\n\n        if (token === ' ') {\n          return '\\\\b \\\\b';\n        }\n\n        // Leading and trailing spaces are changed to word boundary.\n        return this[p.escape](token)\n          .replace(new RegExp('^ ', 'u'), '\\\\b')\n          .replace(new RegExp(' $', 'u'), '\\\\b');\n      });\n\n    const regexp = new RegExp(`^${pattern.join('')}$`, 'iu');\n\n    return { regexp, placeholders: order, match };\n  }\n\n  /**\n   * Split the input phrase along the placeholders noted into brackets:\n   * `Meet [users] on [time].` => ['Meet ', '[users]', ' on ', '[time]', '.']\n   *\n   * @param {string} phrase\n   * @return {Array.<string>}\n   */\n  [p.splitOnPlaceholders](phrase) {\n    const tokens = [''];\n    let index = 0;\n\n    phrase.split('').forEach((c) => {\n      if (c === '[' && tokens[index] !== '') {\n        index++;\n        tokens[index] = '';\n      }\n\n      tokens[index] += c;\n\n      if (c === ']') {\n        index++;\n        tokens[index] = '';\n      }\n    });\n\n    return tokens;\n  }\n\n  /**\n   * Escape characters to be used inside a RegExp as static patterns.\n   *\n   * @param {string} string\n   * @return {string}\n   */\n  [p.escape](string) {\n    return string\n      .replace(new RegExp('\\\\.', 'gu'), '\\\\.')\n      .replace(new RegExp('\\\\/', 'gu'), '\\\\/')\n      .replace(new RegExp('\\\\(', 'gu'), '\\\\(')\n      .replace(new RegExp('\\\\)', 'gu'), '\\\\)');\n  }\n}\n","'use strict';\n\nimport EventDispatcher from './common/event-dispatcher';\nimport WakeWordRecogniser from './wakeword/recogniser';\nimport SpeechRecogniser from './speech/recogniser';\nimport SpeechSynthesis from './speech/synthesis';\nimport IntentParser from './intent-parser';\n\nconst p = Object.freeze({\n  // Properties\n  wakewordRecogniser: Symbol('wakewordRecogniser'),\n  wakewordModelUrl: Symbol('wakewordModelUrl'),\n  speechRecogniser: Symbol('speechRecogniser'),\n  speechSynthesis: Symbol('speechSynthesis'),\n  idle: Symbol('idle'),\n\n  // Methods\n  initialiseSpeechRecognition: Symbol('initialiseSpeechRecognition'),\n  startListeningForWakeword: Symbol('startListeningForWakeword'),\n  stopListeningForWakeword: Symbol('stopListeningForWakeword'),\n  listenForUtterance: Symbol('listenForUtterance'),\n  handleSpeechRecognitionEnd: Symbol('handleSpeechRecognitionEnd'),\n  intentParser: Symbol('intentParser'),\n});\n\nconst EVENT_INTERFACE = [\n  // Emit when the wakeword is being listened for\n  'wakelistenstart',\n\n  // Emit when the wakeword is no longer being listened for\n  'wakelistenstop',\n\n  // Emit when the wakeword is heard\n  'wakeheard',\n\n  // Emit when the speech recognition engine starts listening\n  // (And _could_ be sending speech over the network)\n  'speechrecognitionstart',\n\n  // Emit when the speech recognition engine returns a recognised phrase\n  'speechrecognitionstop',\n\n  // Emit when an intent is successfully parsed and we have a reminder object.\n  'reminder',\n\n  // Emit when a reminder could not be parsed from a text.\n  'parsing-failed',\n];\n\nexport default class SpeechController extends EventDispatcher {\n  constructor() {\n    super(EVENT_INTERFACE);\n\n    this[p.idle] = true;\n    this[p.wakewordModelUrl] = 'data/wakeword_model.json';\n\n    this[p.speechRecogniser] = new SpeechRecogniser();\n    this[p.speechSynthesis] = new SpeechSynthesis();\n    this[p.wakewordRecogniser] = new WakeWordRecogniser();\n    this[p.intentParser] = new IntentParser();\n\n    this[p.wakewordRecogniser].setOnKeywordSpottedCallback(() => {\n      this.emit(EVENT_INTERFACE[2], { type: EVENT_INTERFACE[2] });\n\n      this.startSpeechRecognition();\n    });\n\n    Object.seal(this);\n  }\n\n  get idle() {\n    return this[p.idle];\n  }\n\n  start() {\n    return this[p.initialiseSpeechRecognition]()\n      .then(this[p.startListeningForWakeword].bind(this));\n  }\n\n  startSpeechRecognition() {\n    this[p.idle] = false;\n\n    return this[p.stopListeningForWakeword]()\n      .then(this[p.listenForUtterance].bind(this))\n      .then(this[p.handleSpeechRecognitionEnd].bind(this))\n      .then(this[p.startListeningForWakeword].bind(this))\n      .catch((err) => {\n        console.log('startSpeechRecognition err', err);\n        this.emit(EVENT_INTERFACE[4], { type: EVENT_INTERFACE[4] });\n        this[p.startListeningForWakeword]();\n      });\n  }\n\n  stopSpeechRecognition() {\n    return this[p.speechRecogniser].abort()\n      .then(this[p.startListeningForWakeword].bind(this));\n  }\n\n  /**\n   * Speak a text aloud.\n   *\n   * @param {string} text\n   */\n  speak(text = '') {\n    this[p.speechSynthesis].speak(text);\n  }\n\n  [p.initialiseSpeechRecognition]() {\n    return fetch(this[p.wakewordModelUrl])\n      .then((response) => response.json())\n      .then((model) => {\n        this[p.wakewordRecogniser].loadModel(model);\n      });\n  }\n\n  [p.startListeningForWakeword]() {\n    this.emit(EVENT_INTERFACE[0], { type: EVENT_INTERFACE[0] });\n    this[p.idle] = true;\n\n    return this[p.wakewordRecogniser].startListening();\n  }\n\n  [p.stopListeningForWakeword]() {\n    this.emit(EVENT_INTERFACE[1], { type: EVENT_INTERFACE[1] });\n    return this[p.wakewordRecogniser].stopListening();\n  }\n\n  [p.listenForUtterance]() {\n    this.emit(EVENT_INTERFACE[3], { type: EVENT_INTERFACE[3] });\n    return this[p.speechRecogniser].listenForUtterance();\n  }\n\n  [p.handleSpeechRecognitionEnd](result) {\n    this.emit(EVENT_INTERFACE[4], { type: EVENT_INTERFACE[4], result });\n\n    // Parse intent\n    this[p.intentParser].parse(result.utterance)\n      .then((reminder) => {\n        this.emit(EVENT_INTERFACE[5], {\n          type: EVENT_INTERFACE[5],\n          result: reminder,\n        });\n      })\n      .catch((err) => {\n        this.emit(EVENT_INTERFACE[6], {\n          type: EVENT_INTERFACE[6],\n          result: result.utterance,\n        });\n\n        console.error('Error while parsing the sentence:', err);\n        console.error('Sentence was:', result.utterance);\n      });\n  }\n}\n","'use strict';\n\nimport EventDispatcher from '../common/event-dispatcher';\n\n// Prefix all entries to avoid collisions.\nconst PREFIX = 'cue-';\n\nconst ORIGIN = 'https://calendar.knilxof.org';\n\n/**\n * API version to use (currently not configurable).\n * @type {number}\n * @const\n */\nconst API_VERSION = 1;\n\n/**\n * Regex to match upper case literals.\n * @type {RegExp}\n * @const\n */\nconst UPPER_CASE_REGEX = /([A-Z])/g;\n\nconst p = Object.freeze({\n  values: Symbol('values'),\n  storage: Symbol('storage'),\n\n  // Private methods.\n  updateSetting: Symbol('updateSetting'),\n  stringToSettingTypedValue: Symbol('stringToSettingTypedValue'),\n  getDefaultSettingValue: Symbol('getDefaultSettingValue'),\n  onStorage: Symbol('onStorage'),\n});\n\n// Definition of all available settings and their default values (if needed).\nconst settings = Object.freeze({\n  // String settings.\n  SESSION: Object.freeze({ key: 'session' }),\n});\n\nexport default class Settings extends EventDispatcher {\n  constructor(storage = localStorage) {\n    super();\n\n    // Not all browsers have localStorage supported or activated.\n    this[p.storage] = storage || {\n      getItem: () => null,\n      setItem: () => {},\n      removeItem: () => {},\n      clear: () => {},\n    };\n\n    this[p.values] = new Map();\n\n    Object.keys(settings).forEach((settingName) => {\n      const setting = settings[settingName];\n      const settingStringValue = this[p.storage].getItem(\n        `${PREFIX}${setting.key}`\n      );\n\n      // Setting values directly to avoid firing events on startup.\n      this[p.values].set(\n        setting,\n        this[p.stringToSettingTypedValue](setting, settingStringValue)\n      );\n    });\n\n    window.addEventListener('storage', this[p.onStorage].bind(this));\n\n    Object.seal(this);\n  }\n\n  get session() {\n    return this[p.values].get(settings.SESSION);\n  }\n\n  set session(value) {\n    this[p.updateSetting](settings.SESSION, value);\n  }\n\n  // Getters only.\n  get origin() {\n    return ORIGIN;\n  }\n\n  get apiVersion() {\n    return API_VERSION;\n  }\n\n  /**\n   * Iterates through all known settings and sets default value for all of them.\n   *\n   * @return {Promise}\n   */\n  clear() {\n    return new Promise((resolve) => {\n      Object.keys(settings).forEach((settingName) => {\n        const setting = settings[settingName];\n        this[p.updateSetting](setting, this[p.getDefaultSettingValue](setting));\n      });\n      resolve();\n    });\n  }\n\n  /**\n   * Tries to update setting with new value. If value has changed corresponding\n   * event will be emitted. New value is also persisted to the local storage.\n   *\n   * @param {Object} setting Setting description object.\n   * @param {number|boolean|string?} newValue New value for specified setting.\n   * @private\n   */\n  [p.updateSetting](setting, newValue) {\n    const currentValue = this[p.values].get(setting);\n    if (currentValue === newValue) {\n      return;\n    }\n\n    this[p.values].set(setting, newValue);\n\n    if (newValue !== this[p.getDefaultSettingValue](setting)) {\n      this[p.storage].setItem(`${PREFIX}${setting.key}`, newValue);\n    } else {\n      this[p.storage].removeItem(`${PREFIX}${setting.key}`);\n    }\n\n    this.emit(\n      setting.key.replace(UPPER_CASE_REGEX, (part) => `-${part.toLowerCase()}`),\n      newValue\n    );\n  }\n\n  /**\n   * Converts setting raw string value to the typed one depending on the setting\n   * type.\n   *\n   * @param {Object} setting Setting description object.\n   * @param {string?} stringValue Raw string setting value or null.\n   * @return {number|boolean|string|null}\n   * @private\n   */\n  [p.stringToSettingTypedValue](setting, stringValue) {\n    // If string is null, we should return default value for this setting or\n    // default value for setting type.\n    if (stringValue === null) {\n      return this[p.getDefaultSettingValue](setting);\n    } else if (setting.type === 'boolean') {\n      return stringValue === 'true';\n    } else if (setting.type === 'number') {\n      return Number(stringValue);\n    }\n\n    return stringValue;\n  }\n\n  /**\n   * Gets default typed value for the specified setting.\n   *\n   * @param {Object} setting Setting description object.\n   * @return {number|boolean|string|null}\n   * @private\n   */\n  [p.getDefaultSettingValue](setting) {\n    if (setting.defaultValue !== undefined) {\n      return setting.defaultValue;\n    }\n\n    // Default value for this setting is not specified, let's return default\n    // value for setting type (boolean, number or string).\n    if (setting.type === 'boolean') {\n      return false;\n    } else if (setting.type === 'number') {\n      return 0;\n    }\n\n    return null;\n  }\n\n  /**\n   * Handles localStorage \"storage\" event.\n   *\n   * @param {StorageEvent} evt StorageEvent instance.\n   * @private\n   */\n  [p.onStorage](evt) {\n    if (!evt.key.startsWith(PREFIX)) {\n      return;\n    }\n\n    const key = evt.key.substring(PREFIX.length);\n    const settingName = Object.keys(settings).find((settingName) => {\n      return settings[settingName].key === key;\n    });\n\n    if (!settingName) {\n      console.warn(\n        `Changed unknown storage entry with app specific prefix: ${evt.key}`\n      );\n      return;\n    }\n\n    const setting = settings[settingName];\n\n    this[p.updateSetting](\n      setting,\n      this[p.stringToSettingTypedValue](setting, evt.newValue)\n    );\n  }\n}\n","export function HttpError(statusCode) {\n  this.message = `The response returned a ${statusCode} HTTP status code.`;\n  this.statusCode = statusCode;\n  this.name = 'HttpError';\n  Error.call(this);\n}\n\nHttpError.prototype = Object.create(Error.prototype);\n","'use strict';\n\nimport EventDispatcher from '../common/event-dispatcher';\nimport { HttpError } from '../common/errors';\n\nconst p = Object.freeze({\n  // Private properties.\n  settings: Symbol('settings'),\n  online: Symbol('online'),\n\n  // Private methods.\n  init: Symbol('init'),\n  fetch: Symbol('fetch'),\n});\n\nexport default class Network extends EventDispatcher {\n  constructor(settings) {\n    super(['online']);\n\n    this[p.settings] = settings;\n    this[p.online] = false;\n\n    Object.seal(this);\n\n    this[p.init]();\n  }\n\n  /**\n   * Attach event listeners related to the connection status.\n   */\n  [p.init]() {\n    this[p.online] = navigator.onLine;\n\n    window.addEventListener('online', (online) => {\n      this[p.online] = online;\n      this.emit('online', online);\n    });\n    window.addEventListener('offline', (online) => {\n      this[p.online] = online;\n      this.emit('online', online);\n    });\n\n    if ('connection' in navigator && 'onchange' in navigator.connection) {\n      navigator.connection.addEventListener('change', () => {\n        const online = navigator.onLine;\n\n        this[p.online] = online;\n        this.emit('online', online);\n      });\n    }\n  }\n\n  get origin() {\n    return this[p.settings].origin;\n  }\n\n  get online() {\n    return this[p.online];\n  }\n\n  /**\n   * Request a JSON from a specified URL.\n   *\n   * @param {string} url The URL to send the request to.\n   * @param {string} method The HTTP method (defaults to \"GET\").\n   * @param {Object} body An object of key/value.\n   * @return {Promise}\n   */\n  fetchJSON(url, method = 'GET', body = undefined) {\n    const accept = 'application/json';\n    return this[p.fetch](url, accept, method, body)\n      .then((response) => {\n        const contentType = response.headers.get('Content-Type') || '';\n        if (response.ok && !contentType.startsWith(accept)) {\n          return;\n        }\n\n        return response.json();\n      });\n  }\n\n  /**\n   * Request a Blob from a specified URL.\n   *\n   * @param {string} url The URL to send the request to.\n   * @param {string} blobType The Blob mime type (eg. image/jpeg).\n   * @param {string=} method The HTTP method (defaults to \"GET\").\n   * @param {Object=} body An object of key/value.\n   * @return {Promise<Blob>}\n   */\n  fetchBlob(url, blobType, method, body) {\n    return this[p.fetch](url, blobType, method, body)\n      .then((response) => response.blob());\n  }\n\n  /**\n   * Request a content of the specified type from a specified URL.\n   *\n   * @param {string} url The URL to send the request to.\n   * @param {string} accept The content mime type (eg. image/jpeg).\n   * @param {string=} method The HTTP method (defaults to \"GET\").\n   * @param {Object=} body An object of key/value.\n   * @return {Promise<Response>}\n   * @private\n   */\n  [p.fetch](url, accept, method = 'GET', body = undefined) {\n    method = method.toUpperCase();\n\n    const req = {\n      method,\n      headers: { Accept: accept },\n      cache: 'no-store',\n    };\n\n    if (this[p.settings].session) {\n      // The user is logged in, we authenticate the request.\n      req.headers.Authorization = `Bearer ${this[p.settings].session}`;\n    }\n\n    if (body !== undefined) {\n      req.headers['Content-Type'] = 'application/json;charset=UTF-8';\n      req.body = JSON.stringify(body);\n    }\n\n    return fetch(url, req)\n      .then((res) => {\n        if (!res.ok) {\n          throw new HttpError(res.status);\n        }\n\n        return res;\n      });\n  }\n}\n","'use strict';\n\nimport EventDispatcher from '../common/event-dispatcher';\nimport { HttpError } from '../common/errors';\n\n// Private members\nconst p = Object.freeze({\n  // Properties,\n  api: Symbol('api'),\n  settings: Symbol('settings'),\n\n  // Methods:\n  listenForMessages: Symbol('listenForMessages'),\n});\n\nexport default class WebPush extends EventDispatcher {\n  constructor(api, settings) {\n    super(['message']);\n\n    this[p.api] = api;\n    this[p.settings] = settings;\n\n    Object.seal(this);\n  }\n\n  subscribeToNotifications() {\n    if (!navigator.serviceWorker) {\n      return Promise.reject('No service worker supported');\n    }\n\n    navigator.serviceWorker.addEventListener('message',\n      this[p.listenForMessages].bind(this));\n\n    return navigator.serviceWorker.ready\n      .then(\n        (reg) => reg.pushManager.getSubscription()\n          .then((existing) =>\n            existing || reg.pushManager.subscribe({ userVisibleOnly: true })\n          )\n      )\n      .then((subscription) =>\n        // The server checks for duplicates\n        this[p.api].post('subscriptions', {\n          subscription,\n          title: `Browser ${navigator.userAgent}`,\n        })\n      )\n      .catch((error) => {\n        if (Notification.permission === 'denied') {\n          throw new Error('Permission request was denied.');\n        }\n\n        // \"409 Conflict\" HTTP result is OK.\n        if ((error instanceof HttpError) && error.statusCode === 409) {\n          return;\n        }\n\n        throw new Error(\n          `There was an error while subscribing to push notifications: ${error}`\n        );\n      });\n  }\n\n  [p.listenForMessages](evt) {\n    if (!evt.data) {\n      console.error('Received a push message without a payload.');\n      return;\n    }\n    this.emit('message', evt.data);\n  }\n}\n","'use strict';\n\nconst p = Object.freeze({\n  settings: Symbol('settings'),\n  net: Symbol('net'),\n\n  // Private methods.\n  getURL: Symbol('getURL'),\n  onceOnline: Symbol('onceOnline'),\n  onceReady: Symbol('onceReady'),\n  getChannelValues: Symbol('getChannelValues'),\n  updateChannelValue: Symbol('updateChannelValue'),\n});\n\n/**\n * Instance of the API class is intended to abstract consumer from the API\n * specific details (e.g. API base URL and version). It also tracks\n * availability of the network, API host and whether correct user session is\n * established. If any of this conditions is not met all API requests are\n * blocked until it's possible to perform them, so consumer doesn't have to\n * care about these additional checks.\n */\nexport default class API {\n  constructor(net, settings) {\n    this[p.net] = net;\n    this[p.settings] = settings;\n\n    Object.freeze(this);\n  }\n\n  /**\n   * Performs HTTP 'GET' API request and accepts JSON as response.\n   *\n   * @param {string} path Specific API resource path to be used in conjunction\n   * with the base API path.\n   * @return {Promise}\n   */\n  get(path) {\n    return this[p.onceReady]()\n      .then(() => this[p.net].fetchJSON(this[p.getURL](path)));\n  }\n\n  /**\n   * Performs HTTP 'POST' API request and accepts JSON as response.\n   *\n   * @param {string} path Specific API resource path to be used in conjunction\n   * with the base API path.\n   * @param {Object=} body Optional object that will be serialized to JSON\n   * string and sent as 'POST' body.\n   * @return {Promise}\n   */\n  post(path, body) {\n    return this[p.onceReady]()\n      .then(() => this[p.net].fetchJSON(this[p.getURL](path), 'POST', body));\n  }\n\n  /**\n   * Performs HTTP 'PUT' API request and accepts JSON as response.\n   *\n   * @param {string} path Specific API resource path to be used in conjunction\n   * with the base API path.\n   * @param {Object=} body Optional object that will be serialized to JSON\n   * string and sent as 'PUT' body.\n   * @return {Promise}\n   */\n  put(path, body) {\n    return this[p.onceReady]()\n      .then(() => this[p.net].fetchJSON(this[p.getURL](path), 'PUT', body));\n  }\n\n  /**\n   * Performs HTTP 'DELETE' API request and accepts JSON as response.\n   *\n   * @param {string} path Specific API resource path to be used in conjunction\n   * with the base API path.\n   * @param {Object=} body Optional object that will be serialized to JSON\n   * string and sent as 'DELETE' body.\n   * @return {Promise}\n   */\n  delete(path, body) {\n    return this[p.onceReady]()\n      .then(() => this[p.net].fetchJSON(this[p.getURL](path), 'DELETE', body));\n  }\n\n  /**\n   * Performs either HTTP 'GET' or 'PUT' (if body parameter is specified) API\n   * request and accepts Blob as response.\n   *\n   * @param {string} path Specific API resource path to be used in conjunction\n   * with the base API path.\n   * @param {Object=} body Optional object that will be serialized to JSON\n   * string and sent as 'PUT' body.\n   * @param {string=} accept Mime type of the Blob we expect as a response\n   * (default is image/jpeg).\n   * @return {Promise}\n   */\n  blob(path, body, accept = 'image/jpeg') {\n    return this[p.onceReady]()\n      .then(() => {\n        if (body) {\n          return this[p.net].fetchBlob(\n            this[p.getURL](path), accept, 'PUT', body\n          );\n        }\n\n        return this[p.net].fetchBlob(this[p.getURL](path), accept);\n      });\n  }\n\n  /**\n   * Creates a fully qualified API URL based on predefined base origin, API\n   * version and specified resource path.\n   *\n   * @param {string} path Specific API resource path to be used in conjunction\n   * with the base API path and version.\n   * @return {string}\n   * @private\n   */\n  [p.getURL](path) {\n    if (!path || typeof path !== 'string') {\n      throw new Error('Path should be a valid non-empty string.');\n    }\n\n    return `${this[p.net].origin}/api/v${this[p.settings].apiVersion}/${path}`;\n  }\n\n  /**\n   * Returns a promise that is resolved once API is ready to use (API host is\n   * online).\n   * In the future we can add more checks like:\n   * * User is authenticated\n   * * Document is visible\n   *\n   * @returns {Promise}\n   * @private\n   */\n  [p.onceReady]() {\n    return Promise.all([\n      this[p.onceOnline](),\n    ]);\n  }\n\n  /**\n   * Returns a promise that is resolved once API host is discovered and online.\n   *\n   * @returns {Promise}\n   * @private\n   */\n  [p.onceOnline]() {\n    const net = this[p.net];\n    if (net.online) {\n      return Promise.resolve();\n    }\n\n    return new Promise((resolve) => net.once('online', () => resolve()));\n  }\n}\n","'use strict';\n\nconst p = Object.freeze({\n  api: Symbol('api'),\n  settings: Symbol('settings'),\n});\n\nexport default class Reminders {\n  constructor(api, settings) {\n    this[p.api] = api;\n    this[p.settings] = settings;\n\n    Object.seal(this);\n  }\n\n  /**\n   * Retrieves the list of the reminders.\n   *\n   * @return {Promise<Array>} A promise that resolves with an array of objects.\n   */\n  getAll() {\n    return this[p.api].get('reminders');\n  }\n\n  /**\n   * Gets a reminder given its id.\n   *\n   * @param {string} id The ID of the reminder to retrieve.\n   * @return {Promise}\n   */\n  get(id) {\n    return this[p.api].get(`reminders/${id}`);\n  }\n\n  /**\n   * Create a new reminder.\n   *\n   * @param {Object} body\n   * @return {Promise}\n   */\n  set(body) {\n    return this[p.api].post(`reminders`, body);\n  }\n\n  /**\n   * Delete a reminder given its ID.\n   *\n   * @param {string} id The ID of the reminder to delete.\n   * @return {Promise}\n   */\n  delete(id) {\n    return this[p.api].delete(`reminders/${id}`);\n  }\n}\n","/* global URLSearchParams */\n\n'use strict';\n\nimport EventDispatcher from '../common/event-dispatcher';\n\nimport Settings from './settings';\nimport Network from './network';\nimport WebPush from './webpush';\nimport API from './api';\nimport Reminders from './reminders';\n\n// Private members.\nconst p = Object.freeze({\n  // Private properties.\n  settings: Symbol('settings'),\n  net: Symbol('net'),\n  webPush: Symbol('webPush'),\n  api: Symbol('api'),\n});\n\nexport default class Server extends EventDispatcher {\n  constructor({ settings, net } = {}) {\n    super(['login', 'online', 'push-message']);\n\n    // Private properties.\n    this[p.settings] = settings || new Settings();\n    this[p.net] = net || new Network(this[p.settings]);\n    this[p.api] = new API(this[p.net], this[p.settings]);\n    this[p.webPush] = new WebPush(this[p.api], this[p.settings]);\n\n    // Init\n    this.reminders = new Reminders(this[p.api], this[p.settings]);\n\n    this[p.net].on('online', (online) => this.emit('online', online));\n    this[p.webPush].on('message', (msg) => this.emit('push-message', msg));\n\n    window.server = this;\n\n    Object.seal(this);\n  }\n\n  /**\n   * Clear all data/settings stored on the browser. Use with caution.\n   *\n   * @param {boolean} ignoreServiceWorker\n   * @return {Promise}\n   */\n  clear(ignoreServiceWorker = true) {\n    const promises = [this[p.settings].clear()];\n\n    if (!navigator.serviceWorker && !ignoreServiceWorker) {\n      promises.push(navigator.serviceWorker.ready\n        .then((registration) => registration.unregister()));\n    }\n\n    return Promise.all(promises);\n  }\n\n  get online() {\n    return this[p.net].online;\n  }\n\n  get isLoggedIn() {\n    return !!this[p.settings].session;\n  }\n\n  /**\n   * Authenticate a user.\n   *\n   * @param {string} user\n   * @param {string} password\n   * @return {Promise}\n   */\n  login(user, password) {\n    return this[p.api].post('login', { user, password })\n      .then((res) => {\n        this[p.settings].session = res.token;\n        this.emit('login');\n      });\n  }\n\n  /**\n   * Log out the user.\n   *\n   * @return {Promise}\n   */\n  logout() {\n    this[p.settings].session = null;\n    return Promise.resolve();\n  }\n\n  /**\n   * Ask the user to accept push notifications from the server.\n   * This method will be called each time that we log in, but will stop the\n   * execution if we already have the push subscription information.\n   *\n   * @return {Promise}\n   */\n  subscribeToNotifications() {\n    if (!this.isLoggedIn) {\n      return Promise.reject(new Error(\n        'Error while subscribing to push notifications: user is not logged in'\n      ));\n    }\n    return this[p.webPush].subscribeToNotifications();\n  }\n}\n","import BaseController from './base';\nimport UsersController from './users';\nimport RemindersController from './reminders';\n\nimport SpeechController from '../lib/speech-controller';\nimport Server from '../lib/server/index';\n\nconst p = Object.freeze({\n  controllers: Symbol('controllers'),\n  speechController: Symbol('speechController'),\n  server: Symbol('server'),\n  subscribeToNotifications: Symbol('subscribeToNotifications'),\n\n  onHashChanged: Symbol('onHashChanged'),\n});\n\nexport default class MainController extends BaseController {\n  constructor() {\n    super();\n\n    const mountNode = document.querySelector('.app-view-container');\n    const speechController = new SpeechController();\n    const server = new Server();\n    const options = { mountNode, speechController, server };\n\n    const usersController = new UsersController(options);\n    const remindersController = new RemindersController(options);\n\n    this[p.controllers] = {\n      '': usersController,\n      'users/(.+)': usersController,\n      'reminders': remindersController,\n    };\n\n    this[p.speechController] = speechController;\n    this[p.server] = server;\n\n    window.addEventListener('hashchange', this[p.onHashChanged].bind(this));\n  }\n\n  main() {\n    if (screen && 'orientation' in screen && 'lock' in screen.orientation) {\n      screen.orientation.lock('landscape')\n        .catch((e) => {\n          console.error(e);\n        });\n    }\n\n    this[p.speechController].start()\n      .then(() => {\n        console.log('Speech controller started');\n      });\n\n    this[p.server].on('login', () => this[p.subscribeToNotifications]());\n    this[p.server].on('push-message', (message) => {\n      // if we're in \"speaking reminders\" mode (which is \"always\", currently)\n      this[p.speechController].speak(`${message.title}: ${message.body}`);\n    });\n\n    location.hash = '';\n\n    setTimeout(() => {\n      if (this[p.server].isLoggedIn) {\n        this[p.subscribeToNotifications]();\n        location.hash = 'reminders';\n      } else {\n        location.hash = 'users/login';\n      }\n    });\n  }\n\n  /**\n   * Handles hash change event and routes to the right controller.\n   *\n   * @private\n   */\n  [p.onHashChanged]() {\n    const route = window.location.hash.slice(1);\n\n    for (const routeName of Object.keys(this[p.controllers])) {\n      const match = route.match(new RegExp(`^${routeName}$`));\n      if (match) {\n        this[p.controllers][routeName].main(...match.slice(1));\n        break;\n      }\n    }\n  }\n\n  [p.subscribeToNotifications]() {\n    this[p.server].subscribeToNotifications()\n      .catch((err) => {\n        console.error('Error while subscribing to notifications:', err);\n      });\n  }\n}\n","import MainController from './controllers/main';\n\nconst mainController = new MainController();\nmainController.main();\n"],"names":["HttpError","statusCode","message","name","call","this","jsx","REACT_ELEMENT_TYPE","Symbol","for","type","props","key","children","defaultProps","childrenLength","arguments","length","propName","childArray","Array","i","$$typeof","undefined","ref","_owner","classCallCheck","instance","Constructor","TypeError","createClass","defineProperties","target","descriptor","enumerable","configurable","writable","Object","defineProperty","protoProps","staticProps","prototype","inherits","subClass","superClass","create","constructor","value","setPrototypeOf","__proto__","possibleConstructorReturn","self","ReferenceError","toConsumableArray","arr","isArray","arr2","from","BaseController","properties","assign","main","Error","UserLogin","_React$Component","state","server","onChange","_this","bind","onFormSubmit","evt","login","setState","preventDefault","then","hash","render","React","Component","ALLOWED_ACTIONS","DEFAULT_ACTION","UsersController","action","includes","error","logout","createElement","mountNode","COLOURS","ReminderItem","set_data","TwitterCldrDataBundle","listFormatter","TwitterCldr","ListFormatter","reminder","onDelete","getColour","recipients","join","string","chr","len","charCodeAt","contentClassName","moment","datetime","format","content","TYPES","Toaster","duration","timeout","hide","success","show","info","warning","danger","display","setTimeout","validateType","candidate","className","transform","Reminders","speechController","refreshInterval","toaster","debugEvent","onReminder","onParsingFailure","onWebPushMessage","locale","navigator","languages","language","componentDidMount","reminders","getAll","map","id","due","setInterval","_this2","idle","reload","on","componentWillUnmount","off","result","log","set","users","Number","time","savedReminder","_this3","push","confirmation","speak","catch","res","fullMessage","filter","delete","_this4","sort","a","b","_","groupBy","keys","forEach","month","reminderNodes","reminderMonth","date","remindersDay","_this5","t","Microphone","bleep","Audio","src","pause","currentTime","play","isListening","click","stopSpeechRecognition","startSpeechRecognition","isLoggedIn","RemindersController","document","querySelector","assertValidEventName","eventName","assertValidHandler","handler","assertAllowedEventName","allowedEvents","indexOf","p","freeze","EventDispatcher","listeners","Map","handlers","get","Set","add","once","parameters","size","offAll","clear","emit","hasListeners","has","WakeWordRecogniser","options","minimumConfidence","bufferCount","maxVoiceActivityGap","numGroups","groupSize","recogniser","JsSpeechRecognizer","keywordSpottingMinimumConfidence","keywordSpottingBufferCount","keywordSpottingMaxVoiceActivityGap","seal","startListening","Promise","resolve","closeMic","openMic","isRecording","startKeywordSpottingRecording","stopListening","stopRecording","loadModel","modelData","model","setOnKeywordSpottedCallback","fn","keywordSpottedCallback","SpeechRecogniser","Recognition","window","SpeechRecognition","webkitSpeechRecognition","supportsRecognition","recognition","continuous","listenForUtterance","reject","onresult","event","stop","results","confidence","transcript","onerror","start","abort","VOICE_PITCH","VOICE_RATE","SpeechSynthesis","synthesis","speechSynthesis","initialised","supportsSynthesis","preferredVoice","setPreferredVoice","onvoiceschanged","text","utterance","SpeechSynthesisUtterance","voice","lang","pitch","rate","voices","getVoices","englishVoices","startsWith","femaleVoices","DEFAULT_LOCALE","PATTERNS","user","replace","Confirmation","getReminderMessage","template","getLocalised","data","formatUser","formatAction","formatTime","match","placeholder","prop","PATTERN1","RegExp","PATTERN2","test","isToday","hour","formatHoursAndMinutes","isTomorrow","_hour","isThisMonth","today","startOf","tomorrow","isBetween","in2days","thisMonth","nextMonth","minute","nextHour","dayPeriodsParser","chrono","Parser","pattern","extract","meridiem","toLowerCase","ParsedResult","index","forwardHoursRefiner","Refiner","refine","changeDate","component","isCertain","getFullYear","getMonth","getDate","getHours","opt","forwardHoursOnly","end","customChrono","Chrono","casualOption","parsers","refiners","phrase","parse","Date","IntentParser","patterns","init","intentParser","normalise","parseDatetime","processedPhrase","successful","some","regexp","segments","exec","shift","parseUsers","placeholders","parseAction","split","listBreaker","trim","dates","substr","punctuation","buildPatterns","tokens","splitOnPlaceholders","order","placeholderIndex","token","escape","c","EVENT_INTERFACE","SpeechController","_EventDispatcher","wakewordModelUrl","speechRecogniser","wakewordRecogniser","initialiseSpeechRecognition","startListeningForWakeword","stopListeningForWakeword","handleSpeechRecognitionEnd","err","fetch","response","json","PREFIX","ORIGIN","API_VERSION","UPPER_CASE_REGEX","settings","Settings","storage","localStorage","values","settingName","setting","settingStringValue","getItem","stringToSettingTypedValue","addEventListener","onStorage","updateSetting","getDefaultSettingValue","newValue","currentValue","setItem","removeItem","part","stringValue","defaultValue","substring","find","warn","SESSION","Network","online","onLine","connection","fetchJSON","url","method","body","accept","contentType","headers","ok","fetchBlob","blobType","blob","toUpperCase","req","Accept","session","Authorization","JSON","stringify","status","origin","WebPush","api","subscribeToNotifications","serviceWorker","listenForMessages","ready","reg","pushManager","getSubscription","existing","subscribe","userVisibleOnly","subscription","post","userAgent","Notification","permission","API","net","path","onceReady","getURL","put","apiVersion","all","onceOnline","Server","webPush","msg","ignoreServiceWorker","promises","registration","unregister","password","MainController","_BaseController","usersController","remindersController","controllers","onHashChanged","screen","orientation","lock","e","title","route","location","slice","routeName","mainController"],"mappings":"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","sourceRoot":"/source/"}